<Window 
        x:Class="ServiceCenterApp.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:av="http://schemas.microsoft.com/expression/blend/2008" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="av"
        Title="Dashboard Servis" WindowState="Maximized" WindowStyle="SingleBorderWindow" av:DesignWidth="679.38">
    <Window.Resources>
        <BooleanToVisibilityConverter x:Key="BoolToVisibilityConverter"/>
    </Window.Resources>

    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <DockPanel Grid.Row="0" LastChildFill="False" Margin="0,0,0,10">
            <!-- Tombol kiri -->
            <StackPanel Orientation="Horizontal" DockPanel.Dock="Left">
                <Button Content="Tambah Servis" Click="AddService_Click" Width="125" Margin="0,0,10,0"/>

                <!-- Search bar -->
                <Grid Width="200" VerticalAlignment="Center">
                    <TextBox x:Name="SearchBox"
             VerticalAlignment="Center"
             TextChanged="SearchBox_TextChanged"
             Padding="5,2,5,2"/>
                    <TextBlock Text="Cari..." 
               Foreground="Gray" 
               Margin="8,0,0,0"
               VerticalAlignment="Center"
               IsHitTestVisible="False"
               Visibility="{Binding Text.IsEmpty, ElementName=SearchBox, Converter={StaticResource BoolToVisibilityConverter}}"/>
                    <Image Source="/Assets/search_icon.png" RenderTransformOrigin="-0.604,0.525" Margin="175,3,9,3"/>
                </Grid>

            </StackPanel>

            <!-- Tombol kanan -->
            <StackPanel Orientation="Horizontal" DockPanel.Dock="Right" HorizontalAlignment="Right">
                <Button Content="Upload" Click="UploadDatabase_Click" Margin="0,0,10,0"/>
                <Button Content="Download" Click="DownloadDatabase_Click" Margin="0,0,10,0"/>
                <Button Content="Import Data" Click="ImportData_Click" Margin="0,0,10,0"/>
                <Button Content="Export Data" Click="ExportData_Click"/>
            </StackPanel>
        </DockPanel>

        <StackPanel x:Name="progressContainer" Orientation="Vertical" Margin="-3,41,22,-7" Grid.Row="1" RenderTransformOrigin="0.499,-3.717" />
        <ProgressBar x:Name="progressBar" Minimum="0" Maximum="100" Value="0" Margin="10,44,10,-18" Grid.Row="1" RenderTransformOrigin="0.534,0.57" />
        <TextBlock x:Name="progressText" Text="Progress: 0%" Margin="283,44,0,-14" HorizontalAlignment="Left" Grid.Row="1" />

        <DataGrid x:Name="dgServices" 
          AutoGenerateColumns="False" 
          CanUserAddRows="False" 
          CanUserReorderColumns="False"
          IsReadOnly="True"
          HeadersVisibility="Column"
          Grid.Row="1"
          Margin="10"
          HorizontalAlignment="Stretch"
          VerticalScrollBarVisibility="Auto" 
          HorizontalScrollBarVisibility="Auto"
          SelectionChanged="dgServices_SelectionChanged">

            <DataGrid.Columns>
                <DataGridTextColumn Header="No." Binding="{Binding RowNumber}" Width="Auto" IsReadOnly="True" />

                <DataGridTextColumn Header="Customer" Binding="{Binding CustomerName}" Width="2*">
                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="TextBlock">
                            <Setter Property="TextWrapping" Value="Wrap"/>
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                </DataGridTextColumn>

                <DataGridTextColumn Header="Unit" Binding="{Binding Item}" Width="*">
                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="TextBlock">
                            <Setter Property="TextWrapping" Value="Wrap"/>
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                </DataGridTextColumn>

                <DataGridTextColumn Header="Serial Number" Binding="{Binding SerialNumber}" Width="2*">
                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="TextBlock">
                            <Setter Property="TextWrapping" Value="Wrap"/>
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                </DataGridTextColumn>

                <DataGridTextColumn Header="Warranty" Binding="{Binding WarrantyStatus}" Width="Auto" />

                <DataGridTextColumn Header="Problem" Binding="{Binding Problem}" Width="2*">
                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="TextBlock">
                            <Setter Property="TextWrapping" Value="Wrap"/>
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                </DataGridTextColumn>

                <DataGridTextColumn Header="Status" Binding="{Binding Status}" Width="*" />

                <DataGridTextColumn Header="Tanggal Masuk" Binding="{Binding DateIn}" Width="*" />
                <DataGridTextColumn Header="Tanggal Service" Binding="{Binding ServiceDate}" Width="*" />
                <DataGridTextColumn Header="Tanggal Keluar" Binding="{Binding DateOut}" Width="*" />
                <DataGridTextColumn Header="Lokasi" Binding="{Binding ServiceLocation}" Width="*" />

                <DataGridTextColumn Header="Kelengkapan" Binding="{Binding Accessories}" Width="2*">
                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="TextBlock">
                            <Setter Property="TextWrapping" Value="Wrap"/>
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                </DataGridTextColumn>

                <DataGridTemplateColumn Header="Action" Width="160">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                                <Button Content="Edit" Click="EditService_Click" Tag="{Binding}" Margin="0,0,5,0" />
                                <Button Content="Hapus" Click="DeleteService_Click" Tag="{Binding}" Background="DarkRed" Foreground="White" />
                            </StackPanel>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
            </DataGrid.Columns>
        </DataGrid>
    </Grid>
</Window>
